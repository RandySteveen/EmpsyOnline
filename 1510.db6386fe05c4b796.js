"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1510],{1510:(O,u,r)=>{r.r(u),r.d(u,{LoginPageModule:()=>w});var d=r(177),a=r(4341),l=r(9364),h=r(8986),f=r(467),v=r(5312),e=r(4438),M=r(4517),P=r(1626);const C=t=>({"text-red":t});function b(t,c){if(1&t){const s=e.RV6();e.j41(0,"div",19)(1,"ion-button",20),e.bIt("click",function(){e.eBV(s);const o=e.XpG();return e.Njj(o.toggleModal())}),e.EFF(2,"Licencia"),e.k0s()()}}function x(t,c){if(1&t){const s=e.RV6();e.j41(0,"div",21)(1,"div",22),e.nrm(2,"ion-input",23,0)(4,"br"),e.j41(5,"ion-button",24),e.bIt("click",function(){e.eBV(s);const o=e.XpG();return e.Njj(o.saveToken())}),e.EFF(6,"Enviar"),e.k0s(),e.nrm(7,"br"),e.j41(8,"ion-button",25),e.bIt("click",function(){e.eBV(s);const o=e.XpG();return e.Njj(o.closeModal())}),e.EFF(9,"Cancelar"),e.k0s()()()}}const _=[{path:"",component:(()=>{var t;class c{constructor(n,o,i,g,m){this.fb=n,this.loadingController=o,this.alertController=i,this.http=g,this.navCtrl=m,this.daysRemaining=0,this.showModal=!1,this.FormLogin=this.fb.group({email:new a.MJ("",a.k0.required),password:new a.MJ("",a.k0.required)})}Submit(){var n=this;return(0,f.A)(function*(){if(n.daysRemaining<=0)yield(yield n.alertController.create({header:"Licencia Expirada",message:"Aviso: Licencia expirada, renueva la licencia para seguir usando el sistema.",buttons:["OK"],cssClass:"warning-alert"})).present();else{yield(yield n.loadingController.create({message:"Iniciando sesi\xf3n...",duration:3e3,spinner:"circles"})).present();try{const i=yield n.http.post(`${v.c.EmpsyAuth}/login`,n.FormLogin.value).toPromise();console.log(i),200===i.code?(localStorage.setItem("Auth",i.infoUser),n.navCtrl.navigateBack(["SpinnerAuth"])):404===i.code&&n.presentAlert("Credenciales inv\xe1lidas","Verifica tus credenciales e intenta nuevamente.")}catch(i){n.presentAlert("Credenciales inv\xe1lidas","Verifica tus credenciales e intenta nuevamente."),console.error("Error al procesar la solicitud:",i)}}})()}toggleModal(){this.showModal=!this.showModal}closeModal(){this.showModal=!1}presentAlert(n,o){var i=this;return(0,f.A)(function*(){yield(yield i.alertController.create({header:n,message:o,buttons:["OK"]})).present()})()}saveToken(){const n=document.getElementById("validationInput").value,i=JSON.parse(atob(n.split(".")[1])).timeLicense;localStorage.setItem("token",n),this.daysRemaining=i,localStorage.setItem("daysRemaining",this.daysRemaining.toString()),this.closeModal()}ngOnInit(){const n=localStorage.getItem("token");if(n){const o=JSON.parse(atob(n.split(".")[1]));this.daysRemaining=o.timeLicense}setInterval(()=>{this.updateDaysRemaining()},1e4)}updateDaysRemaining(){const n=localStorage.getItem("token");if(n){const o=JSON.parse(atob(n.split(".")[1])),g=new Date(o.date_expires).getTime(),m=new Date(o.date_create).getTime(),p=(new Date).getTime();this.daysRemaining=p<g&&p>m?Math.ceil((g-p)/864e5):0,localStorage.setItem("daysRemaining",this.daysRemaining.toString())}}}return(t=c).\u0275fac=function(n){return new(n||t)(e.rXU(a.ok),e.rXU(l.Xi),e.rXU(l.hG),e.rXU(P.Qq),e.rXU(M.q9))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-login"]],decls:25,vars:7,consts:[["validationInput",""],["lang","en"],["charset","UTF-8"],["http-equiv","x-ua-compatible","content","ie=edge"],["name","viewport","content","width=device-width, initial-scale=1"],[1,"align"],[1,"grid","align__item"],[1,"register"],[1,"center-container"],["src","../../../assets/images/imagen_2024-02-07_141514314-Photoroom.png-Photoroom.png","alt","LogoTipo"],["method","post",1,"form",3,"formGroup"],[1,"form__field"],["type","email","placeholder","Ingresar Email","formControlName","email"],["type","password","placeholder","Ingresar Contrase\xf1a","formControlName","password"],["type","submit","value","Acceder",3,"click"],[1,"center-information",3,"ngClass"],["name","key-outline","slot","start",1,"icon-generated"],["class","button-center",4,"ngIf"],["class","modal",4,"ngIf"],[1,"button-center"],["size","small","color","tertiary",3,"click"],[1,"modal"],[1,"content"],["id","validationInput","placeholder","C\xf3digo de Validaci\xf3n"],["expand","block","color","tertiary",3,"click"],["expand","block","color","danger",3,"click"]],template:function(n,o){1&n&&(e.j41(0,"html",1)(1,"head"),e.nrm(2,"meta",2),e.j41(3,"title"),e.EFF(4,"Daily UI | #001 - Sign Up"),e.k0s(),e.nrm(5,"meta",3)(6,"meta",4),e.k0s(),e.j41(7,"body",5)(8,"div",6)(9,"div",7)(10,"div",8),e.nrm(11,"img",9),e.k0s(),e.j41(12,"form",10)(13,"div",11),e.nrm(14,"input",12),e.k0s(),e.j41(15,"div",11),e.nrm(16,"input",13),e.k0s(),e.j41(17,"div",11)(18,"input",14),e.bIt("click",function(){return o.Submit()}),e.k0s()(),e.j41(19,"div",15),e.nrm(20,"ion-icon",16),e.j41(21,"p"),e.EFF(22),e.k0s()(),e.DNE(23,b,3,0,"div",17)(24,x,10,0,"div",18),e.k0s()()()()()),2&n&&(e.R7$(12),e.Y8G("formGroup",o.FormLogin),e.R7$(7),e.Y8G("ngClass",e.eq3(5,C,o.daysRemaining<=5)),e.R7$(3),e.SpI("Quedan ",o.daysRemaining," dias para Vencer la licencia"),e.R7$(),e.Y8G("ngIf",o.daysRemaining<=5),e.R7$(),e.Y8G("ngIf",o.showModal))},dependencies:[d.YU,d.bT,a.qT,a.me,a.BC,a.cb,l.Jm,l.iq,l.$w,l.Gw,a.j4,a.JD],styles:['@charset "UTF-8";*[_ngcontent-%COMP%]{box-sizing:border-box}html[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{background-color:#354152;color:#7e8ba3;font:300 1rem/1.5 Helvetica Neue,sans-serif;margin:0;min-height:100%}.align[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:row}.align__item--start[_ngcontent-%COMP%]{align-self:flex-start}.align__item--end[_ngcontent-%COMP%]{align-self:flex-end}.site__logo[_ngcontent-%COMP%]{margin-bottom:2rem}.icon-generated[_ngcontent-%COMP%]{font-size:1.5em;color:#fff}.center-information[_ngcontent-%COMP%]{justify-content:center;align-items:center;text-align:center;margin:0}.text-red[_ngcontent-%COMP%]{color:red}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center}.content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:10px;box-shadow:0 2px 4px #0003;width:80%;max-width:400px}@media screen and (max-width: 576px){.modal-content[_ngcontent-%COMP%]{width:90%;max-width:90%}}.warning-alert[_ngcontent-%COMP%]{background-color:#ffc107;color:#333;font-weight:700;border:2px solid #ffc107}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:10px;box-shadow:0 2px 4px #0003;width:80%;max-width:400px}ion-input[_ngcontent-%COMP%]{margin-bottom:10px}.button-center[_ngcontent-%COMP%]{justify-content:center;align-items:center;text-align:center;margin:0 0 10px}.center-container[_ngcontent-%COMP%]{justify-content:center;align-items:center;text-align:center;border-radius:50%;width:100%;margin:0}input[_ngcontent-%COMP%]{border:0;font:inherit}input[_ngcontent-%COMP%]::placeholder{color:#7e8ba3}.form__field[_ngcontent-%COMP%]{margin-bottom:1rem}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:0;padding:.5rem 1rem}.form[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .form[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%}.grid[_ngcontent-%COMP%]{margin:0 auto;max-width:25rem;width:100%}h2[_ngcontent-%COMP%]{font-size:2.75rem;font-weight:100;margin:0 0 1rem;text-transform:uppercase}svg[_ngcontent-%COMP%]{height:auto;max-width:100%;vertical-align:middle}a[_ngcontent-%COMP%]{color:#7e8ba3}.register[_ngcontent-%COMP%]{box-shadow:0 0 250px #000;text-align:center;padding:4rem 2rem}.register[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #242c37;border-radius:999px;background-color:transparent;text-align:center}.register[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .register[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{background-repeat:no-repeat;background-size:1.5rem;background-position:1rem 50%}.register[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{background-image:url(\'data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="#242c37"><path d="M256.017 273.436l-205.17-170.029h410.904l-205.734 170.029zm-.034 55.462l-205.983-170.654v250.349h412v-249.94l-206.017 170.245z"/></svg>\')}.register[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{background-image:url(\'data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="#242c37"><path d="M195.334 223.333h-50v-62.666c0-61.022 49.645-110.667 110.666-110.667 61.022 0 110.667 49.645 110.667 110.667v62.666h-50v-62.666c0-33.452-27.215-60.667-60.667-60.667-33.451 0-60.666 27.215-60.666 60.667v62.666zm208.666 30v208.667h-296v-208.667h296zm-121 87.667c0-14.912-12.088-27-27-27s-27 12.088-27 27c0 7.811 3.317 14.844 8.619 19.773 4.385 4.075 6.881 9.8 6.881 15.785v22.942h23v-22.941c0-5.989 2.494-11.708 6.881-15.785 5.302-4.93 8.619-11.963 8.619-19.774z"/></svg>\')}.register[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]{background-image:linear-gradient(160deg,#8ceabb,#378f7b);color:#fff;margin-bottom:6rem;width:100%}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1}.content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:10px;box-shadow:0 2px 4px #0003;width:80%;max-width:400px;z-index:1}']}),c})()}];let y=(()=>{var t;class c{}return(t=c).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[h.iI.forChild(_),h.iI]}),c})(),w=(()=>{var t;class c{}return(t=c).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[d.MD,a.YN,l.bv,y,a.X1]}),c})()}}]);