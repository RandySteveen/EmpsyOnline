"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[965],{965:(M,f,d)=>{d.r(f),d.d(f,{ClientsPageModule:()=>R});var u=d(177),a=d(4341),l=d(9364),_=d(8986),p=d(467),C=d(8866),b=d(9214),h=d(5312),t=d(4438),k=d(1626);function E(o,s){if(1&o&&(t.j41(0,"ion-select-option",21),t.EFF(1),t.k0s()),2&o){const r=s.$implicit;t.Y8G("value",r.estado),t.R7$(),t.JRh(r.estado)}}function P(o,s){if(1&o&&(t.j41(0,"ion-select-option",21),t.EFF(1),t.k0s()),2&o){const r=s.$implicit;t.Y8G("value",r),t.R7$(),t.JRh(r)}}function v(o,s){if(1&o&&(t.j41(0,"ion-item"),t.nrm(1,"ion-icon",10),t.j41(2,"ion-select",22),t.DNE(3,P,2,2,"ion-select-option",17),t.k0s()()),2&o){const r=t.XpG();t.R7$(3),t.Y8G("ngForOf",r.municipiosPorEstado)}}let F=(()=>{var o;class s{constructor(e,n,i,c,g){this.toastController=e,this.modalController=n,this.http=i,this.fb=c,this.alertController=g,this.estadosVenezuela=b.b,this.municipiosPorEstado=[],this.formEdit=this.fb.group({id_client:[""],address:["",a.k0.required],fullname:["",a.k0.required],direction:["",a.k0.required],phone:["",a.k0.required],state:["",a.k0.required],sector:["",a.k0.required],email:["",a.k0.required]})}onEstadoChange(){const e=this.estadosVenezuela.find(n=>{var i;return n.estado===(null===(i=this.formEdit.get("state"))||void 0===i?void 0:i.value)});this.municipiosPorEstado=e?e.municipios:[]}cerrarModal(){this.modalController.dismiss()}presentToast(e){var n=this;return(0,p.A)(function*(){(yield n.toastController.create({message:e,duration:3e3,position:"top",color:"success"})).present()})()}Submit(){var e=this;return(0,p.A)(function*(){var i;yield(yield e.alertController.create({header:"Editar",message:"Editar Cliente",buttons:[{text:"Cancelar",role:"Cancel",handler:()=>{}},{text:"Aceptar",handler:(i=(0,p.A)(function*(){try{const c=yield e.http.post(`${h.c.EmpsyClient}/edit`,e.formEdit.value).toPromise();console.log(c),e.presentToast("Cliente Editado con \xe9xito"),setTimeout(()=>{location.reload()},3e3)}catch(c){console.error("Error al procesar la solicitud:",c)}}),function(){return i.apply(this,arguments)})}]})).present()})()}ngOnInit(){var e;null===(e=this.formEdit.get("id_client"))||void 0===e||e.setValue(this.id_client),console.log(this.id_client)}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(l.K_),t.rXU(l.W3),t.rXU(k.Qq),t.rXU(a.ok),t.rXU(l.hG))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-edit-client-component"]],inputs:{id_client:"id_client"},decls:48,vars:4,consts:[["color","dark"],["align","center"],["slot","end"],[3,"click"],["slot","icon-only","name","close","color","danger"],["Scroll-Y","true",3,"translate"],[1,"center-title"],[1,"label-title"],["name","warning-outline",1,"icon-form"],[3,"formGroup"],["name","warning-outline","slot","start",1,"icon-register"],["placeholder","Ingrese Documento de Identidad","type","text","formControlName","address"],["placeholder","Ingrese Nombre y Apellido","type","text","formControlName","fullname"],["placeholder","Ingrese Direccion","type","text","formControlName","direction"],["placeholder","Ingrese Numero Movil","inputmode","numeric","type","tel","formControlName","phone"],["placeholder","Ingrese Correo Electronico","type","email","formControlName","email"],["formControlName","state","placeholder","Estado",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["expand","block","color","tertiary",3,"click"],["expand","block","color","danger",3,"click"],[3,"value"],["placeholder","Seleccione un municipio","formControlName","sector"]],template:function(e,n){1&e&&(t.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title",1),t.EFF(3,"Editar Cliente"),t.k0s(),t.j41(4,"ion-buttons",2)(5,"ion-button",3),t.bIt("click",function(){return n.cerrarModal()}),t.nrm(6,"ion-icon",4),t.k0s()()()(),t.j41(7,"ion-content",5)(8,"div",6)(9,"ion-title",7),t.EFF(10,"Completa los campos "),t.nrm(11,"ion-icon",8),t.EFF(12," Obligatorios"),t.k0s()(),t.nrm(13,"hr"),t.j41(14,"form",9)(15,"ion-item"),t.nrm(16,"ion-icon",10)(17,"ion-input",11),t.k0s(),t.nrm(18,"br"),t.j41(19,"ion-item"),t.nrm(20,"ion-icon",10)(21,"ion-input",12),t.k0s(),t.nrm(22,"br"),t.j41(23,"ion-item"),t.nrm(24,"ion-icon",10)(25,"ion-input",13),t.k0s(),t.nrm(26,"br"),t.j41(27,"ion-item"),t.nrm(28,"ion-icon",10)(29,"ion-input",14),t.k0s(),t.nrm(30,"br"),t.j41(31,"ion-item"),t.nrm(32,"ion-icon",10)(33,"ion-input",15),t.k0s(),t.nrm(34,"br"),t.j41(35,"ion-item"),t.nrm(36,"ion-icon",10),t.j41(37,"ion-select",16),t.bIt("ionChange",function(){return n.onEstadoChange()}),t.DNE(38,E,2,2,"ion-select-option",17),t.k0s()(),t.nrm(39,"br"),t.DNE(40,v,4,1,"ion-item",18),t.nrm(41,"br"),t.k0s(),t.nrm(42,"br"),t.j41(43,"ion-button",19),t.bIt("click",function(){return n.Submit()}),t.EFF(44,"Guardar"),t.k0s(),t.nrm(45,"br"),t.j41(46,"ion-button",20),t.bIt("click",function(){return n.cerrarModal()}),t.EFF(47,"Salir"),t.k0s()()),2&e&&(t.R7$(7),t.Y8G("translate",!0),t.R7$(7),t.Y8G("formGroup",n.formEdit),t.R7$(24),t.Y8G("ngForOf",n.estadosVenezuela),t.R7$(2),t.Y8G("ngIf",n.municipiosPorEstado.length>0))},dependencies:[u.Sq,u.bT,a.qT,a.BC,a.cb,l.Jm,l.QW,l.W9,l.eU,l.iq,l.$w,l.uz,l.Nm,l.Ip,l.BC,l.ai,l.Je,l.Gw,a.j4,a.JD],styles:[".label-title[_ngcontent-%COMP%]{align-items:center;text-align:center;font-size:1.3em;font-family:Poppins,sans-serif;font-weight:700;font-style:normal}ion-input[_ngcontent-%COMP%]{border-radius:10%}.icon-register[_ngcontent-%COMP%]{font-size:1em;color:red}.center-title[_ngcontent-%COMP%]{justify-content:center;text-align:center;align-items:center}.icon-form[_ngcontent-%COMP%]{font-size:1em;color:red;margin-left:5px;margin-right:5px;margin-top:5px}"]}),s})();d(5083);function j(o,s){if(1&o){const r=t.RV6();t.j41(0,"ion-button",21),t.bIt("click",function(){t.eBV(r);const n=t.XpG(2).$implicit,i=t.XpG();return t.Njj(i.InactiveAdmin(n.id_client,n.activation_status))}),t.nrm(1,"ion-icon",22),t.EFF(2),t.k0s()}if(2&o){const r=t.XpG(2).$implicit;t.Y8G("color",0===r.activation_status?"danger":"tertiary"),t.R7$(2),t.SpI(" ",0===r.activation_status?"Activar":"Inactivar"," ")}}function I(o,s){if(1&o){const r=t.RV6();t.j41(0,"ion-row",15)(1,"ion-col")(2,"ion-list")(3,"ion-item"),t.EFF(4),t.k0s(),t.j41(5,"ion-item"),t.EFF(6),t.k0s(),t.j41(7,"ion-item"),t.EFF(8),t.k0s(),t.j41(9,"ion-item"),t.EFF(10),t.k0s(),t.j41(11,"ion-item"),t.EFF(12),t.k0s(),t.j41(13,"ion-item"),t.EFF(14),t.k0s(),t.j41(15,"div",16)(16,"ion-button",17),t.bIt("click",function(){t.eBV(r);const n=t.XpG().$implicit,i=t.XpG();return t.Njj(i.EditClient(n.id_client))}),t.nrm(17,"ion-icon",18),t.EFF(18,"Editar"),t.k0s(),t.DNE(19,j,3,2,"ion-button",19),t.j41(20,"ion-button",20),t.bIt("click",function(){t.eBV(r);const n=t.XpG().$implicit,i=t.XpG();return t.Njj(i.openWhatsApp(n.phone))}),t.EFF(21,"WhatsApp"),t.k0s()()()()()}if(2&o){const r=t.XpG().$implicit,e=t.XpG();t.R7$(4),t.SpI("Cedula: ",r.address," "),t.R7$(2),t.SpI(" Tel\xe9fono: ",r.phone," "),t.R7$(2),t.SpI("Pais: ",r.country," "),t.R7$(2),t.SpI("Estado: ",r.state," "),t.R7$(2),t.SpI("Sector: ",r.sector," "),t.R7$(2),t.SpI("Status del Cliente: ",1===r.activation_status?"Activo":"Inactivo",""),t.R7$(5),t.Y8G("ngIf","VED"!==e.userType)}}function T(o,s){if(1&o){const r=t.RV6();t.j41(0,"div")(1,"ion-row",12)(2,"ion-col"),t.EFF(3),t.k0s(),t.j41(4,"ion-col"),t.EFF(5),t.k0s(),t.j41(6,"ion-col")(7,"ion-button",13),t.bIt("click",function(){const n=t.eBV(r).$implicit,i=t.XpG();return t.Njj(i.toggleDetalles(n))}),t.EFF(8),t.k0s()()(),t.DNE(9,I,22,7,"ion-row",14),t.k0s()}if(2&o){const r=s.$implicit;t.R7$(3),t.JRh(r.fullname),t.R7$(2),t.JRh(r.direction),t.R7$(3),t.SpI(" ",r.mostrarDetalles?"-":"+"," "),t.R7$(),t.Y8G("ngIf",r.mostrarDetalles)}}const $=[{path:"",component:(()=>{var o;class s{constructor(e,n,i){this.http=e,this.alertController=n,this.modalController=i,this.searchText="",this.items=[],this.clienteSeleccionado=null,this.clientesPorPagina=[],this.totalPaginas=9,this.paginaActual=1,this.clientesPorPaginaOpciones=[5,10,20],this.clientesPorPaginaSeleccionada=5,this.type_supervisor="",this.userType=null}ngOnInit(){}isWhatsAppInstalled(){return(0,p.A)(function*(){let e;const n=navigator.userAgent||navigator.vendor;return e=n&&-1!==n.indexOf("WhatsApp")?"whatsapp://send":"https://api.whatsapp.com",e})()}openWhatsApp(e){return(0,p.A)(function*(){const n=e.startsWith("+58")?e:"+58"+e,i=`whatsapp://send?phone=${encodeURIComponent(n)}`;window.location.href=i,setTimeout(()=>{const c=`https://api.whatsapp.com/send?phone=${encodeURIComponent(n)}`;window.location.href=c},1e3)})()}onSearchInput(e){const n=e.target;null!=n.value&&(this.searchText=n.value)}get filteredItems(){return this.items.filter(e=>e.fullname.toLowerCase().includes(this.searchText.toLowerCase()))}toggleDetalles(e){e.mostrarDetalles=!e.mostrarDetalles,this.items.forEach(n=>{n!==e&&(n.mostrarDetalles=!1)})}mostrarDetalles(e){this.clienteSeleccionado=e}anteriorPagina(){this.paginaActual>1&&(this.paginaActual--,this.calcularPaginas())}siguientePagina(){this.paginaActual<this.totalPaginas&&(this.paginaActual++,this.calcularPaginas())}calcularPaginas(){const e=(this.paginaActual-1)*this.clientesPorPaginaSeleccionada;this.clientesPorPagina=this.items.slice(e,e+this.clientesPorPaginaSeleccionada),this.totalPaginas=Math.ceil(this.items.length/this.clientesPorPaginaSeleccionada)}ViewClient(){this.http.get(`${h.c.EmpsyClient}/all/${this.id_supervisor}/${this.type_supervisor}`).subscribe(e=>{console.log(e),this.items=e.data.map(n=>({...n,mostrarDetalles:!1}))})}InactiveAdmin(e,n){var i=this;return(0,p.A)(function*(){var g;yield(yield i.alertController.create({header:"Informacion",message:"Realizar la siguiente Operaccion..",buttons:[{text:"Cancelar",role:"cancel",handler:()=>{console.log("El usuario presion\xf3 cancelar")}},{text:"Aceptar",handler:(g=(0,p.A)(function*(){try{n=0===n?1:0;const m=yield i.http.post(`${h.c.EmpsyClient}/delete/${e}/${n}`,{id_client:e,activation_status:n}).toPromise();console.log(m),200===m.code&&console.log("El administrador ha sido "+(0===n?"activado":"inactivado")),location.reload()}catch(m){console.error(m)}}),function(){return g.apply(this,arguments)})}]})).present()})()}analizarToken(){const e=localStorage.getItem("Auth");if(e){const n=(0,C.s)(e);console.log("Decoded Token:",n);for(const i in n)if(n.hasOwnProperty(i)){if("id_seller"===i){this.id_supervisor=n.id_seller,this.type_supervisor="VED";break}if("id_boss"===i){this.id_supervisor=n.id_boss,this.type_supervisor="ADM";break}}this.type_supervisor||console.log("No se encontraron campos id_seller ni id_boss en el token.")}else console.log("No se encontr\xf3 ning\xfan token en localStorage.")}editModal(e){var n=this;return(0,p.A)(function*(){return yield(yield n.modalController.create({component:F,cssClass:"AddClient-Register",backdropDismiss:!1,componentProps:{id_client:e}})).present()})()}EditClient(e){var n=this;return(0,p.A)(function*(){var c;yield(yield n.alertController.create({header:"Editar",message:"Editar Cliente",buttons:[{text:"Cancelar",role:"Cacel",handler:()=>{console.log("el usuario presiono cancelar")}},{text:"Aceptar",handler:(c=(0,p.A)(function*(){n.editModal(e)}),function(){return c.apply(this,arguments)})}]})).present()})()}ionViewWillEnter(){this.analizarToken(),this.ViewClient(),this.analizarTipoUsuario()}analizarTipoUsuario(){const e=localStorage.getItem("Auth");if(e){const n=(0,C.s)(e);for(const i in n)if(n.hasOwnProperty(i)){if("id_seller"===i){this.userType="VED";break}if("id_boss"===i){this.userType="ADM";break}}}}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(k.Qq),t.rXU(l.hG),t.rXU(l.W3))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-clients"]],decls:34,vars:5,consts:[[3,"translucent"],[1,"label-title"],["position","floating"],["name","search-outline","color","dark"],["placeholder","Buscar...",1,"custom-search-input",3,"ngModelChange","input","ngModel"],[1,"container"],[1,"tabla"],[1,"encabezado"],[4,"ngFor","ngForOf"],[1,"paginador"],["color","danger",3,"click"],["color","tertiary",3,"click"],[1,"datos"],[3,"click"],["class","detalle",4,"ngIf"],[1,"detalle"],[1,"center-buttons"],["color","primary",3,"click"],["name","create-outline"],[3,"color","click",4,"ngIf"],["color","success",3,"click"],[3,"click","color"],["name","trash-outline"]],template:function(e,n){1&e&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t.EFF(3,"viewNew"),t.k0s()()(),t.j41(4,"ion-content"),t.nrm(5,"br"),t.j41(6,"h1",1),t.EFF(7,"Cantidad de Clientes"),t.k0s(),t.j41(8,"ion-item")(9,"ion-label",2),t.nrm(10,"ion-icon",3),t.EFF(11,"Buscar Cliente"),t.k0s(),t.j41(12,"ion-input",4),t.mxI("ngModelChange",function(c){return t.DH7(n.searchText,c)||(n.searchText=c),c}),t.bIt("input",function(c){return n.onSearchInput(c)}),t.k0s()(),t.nrm(13,"br"),t.j41(14,"div",5)(15,"ion-grid",6)(16,"ion-row",7)(17,"ion-col"),t.EFF(18,"Nombre"),t.k0s(),t.j41(19,"ion-col"),t.EFF(20,"Direccion"),t.k0s(),t.j41(21,"ion-col"),t.EFF(22,"Acciones"),t.k0s()(),t.DNE(23,T,10,4,"div",8),t.k0s()(),t.j41(24,"ion-grid")(25,"ion-row",9)(26,"ion-col")(27,"ion-button",10),t.bIt("click",function(){return n.anteriorPagina()}),t.EFF(28,"Anterior"),t.k0s()(),t.j41(29,"ion-col"),t.EFF(30),t.k0s(),t.j41(31,"ion-col")(32,"ion-button",11),t.bIt("click",function(){return n.siguientePagina()}),t.EFF(33,"Siguiente"),t.k0s()()()()()),2&e&&(t.Y8G("translucent",!0),t.R7$(12),t.R50("ngModel",n.searchText),t.R7$(11),t.Y8G("ngForOf",n.filteredItems),t.R7$(7),t.Lme("",n.paginaActual," de ",n.totalPaginas,""))},dependencies:[u.Sq,u.bT,a.BC,a.vS,l.Jm,l.hU,l.W9,l.lO,l.eU,l.iq,l.$w,l.uz,l.he,l.nf,l.ln,l.BC,l.ai,l.Gw],styles:['@charset "UTF-8";.tabla[_ngcontent-%COMP%]{width:100%}.encabezado[_ngcontent-%COMP%]{background-color:#f0f0f0;font-weight:700;padding:10px;border-bottom:1px solid #ccc;text-align:center}.datos[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #ccc;text-align:center;justify-content:center;align-items:center}.detalle[_ngcontent-%COMP%]{background-color:#f9f9f9;padding:10px;border-bottom:1px solid #ccc;justify-content:center;text-align:center;align-items:center}.label-title[_ngcontent-%COMP%]{text-align:center;font-size:25px;color:#000;font-family:Roboto,sans-serif;font-style:normal;font-weight:700;margin-top:20px}ion-icon[_ngcontent-%COMP%]{margin-right:10px;color:#1d1db6}.paginador[_ngcontent-%COMP%]{justify-content:center;align-items:center;text-align:center}ion-icon[_ngcontent-%COMP%]{margin-right:5px;color:#fff;font-size:1.2em}']}),s})()}];let A=(()=>{var o;class s{}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[_.iI.forChild($),_.iI]}),s})(),R=(()=>{var o;class s{}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[u.MD,a.YN,l.bv,A,a.X1]}),s})()}}]);